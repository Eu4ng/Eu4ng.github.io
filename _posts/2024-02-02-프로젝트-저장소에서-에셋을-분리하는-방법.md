---
layout: post
title: 프로젝트 저장소에서 에셋을 분리하는 방법
date: 2024-02-02 20:39 +0900
author: Eu4ng
categories: [프로젝트 관리]
tags: [unity, unreal-engine]
---

## 작성 계기

> 에셋 버전 관리의 필요성을 느꼈습니다.
{: .prompt-info }

그동안 여러 프로젝트를 진행하면서 에셋 관리 문제로 인해 스트레스를 많이 받았습니다. 에셋을 마구잡이로 사용하다보니 저장소 용량이 커지는 것은 기본이고 에셋을 추가 혹은 교체할 때마다 프로젝트에서 사용할 수 있게끔 다시 설정하는 번거로움이 있습니다. 

또한, 협업 과정에서 다른 개발자가 에셋을 잘못 건드리는 경우도 있고 프로젝트를 갈아 엎는 경우도 있다보니 에셋 버전 관리를 별도로 할 필요성을 느꼈습니다.

이를 해결하기 위해 여러 방법들을 시도해 보았습니다만 만족스럽지 못했었는데 최근에 간단한 방법을 찾아내서 이번 기회에 글로 작성해보려고 합니다.

## 결론

본문에서는 지금까지 제가 시도한 방식들과 장단점에 대해 전부 이야기해 보려고 합니다.
하지만 빠르게 결론부터 이야기하자면 아래와 같습니다.

> Git 서브모듈을 통해 프로젝트 저장소와 에셋 전용 저장소를 연결하면 됩니다.
{: .prompt-tip }

## 프로젝트 전용 에셋 패키지 제작

처음 시도한 방식은 프로젝트에서 사용할 모든 에셋들을 하나의 패키지로 만드는 방법이었습니다. 

먼저 AssetCollection 이라는 저장소를 따로 만들어 메인 프로젝트와 동일한 환경으로 구성한 뒤 그곳에 에셋 후보를 전부 임포트하였습니다. 그리고나서 사용할 에셋들만 따로 모아 패키지로 제작하였고, git 태그를 통해 버전 관리를 진행하였습니다.

이를 통해 혹시라도 메인 프로젝트에서 실수로 에셋 설정을 바꾸거나 문제가 발생하여도 버전에 맞는 에셋 패키지를 재임포트함으로써 불상사를 방지하였습니다.

그러나 이 방법은 에셋을 추가하거나 수정하고 싶은 경우 에셋 패키지를 다시 제작한 다음 export 및 import 작업을 직접 수행해야 했고, 프로젝트 설정이 변경되는 경우 에셋 전용 저장소 역시 설정 동기화 작업이 필요하는 등 매우 번거로웠습니다. 

또한, 저장소마다 프로젝트가 따로 존재하였기 때문에 여러 프로젝트를 옮겨다니는 것이 번거롭고 부담스럽다보니 다른 작업자들에게 이 방식을 강요하기 껄끄러웠습니다.

> 물론 유니티의 경우 UPM(유니티 패키지 매니저)을 이용하면 git 저장소와 버전 태그를 통해 자동으로 업데이트하는 기능이 있기 때문에 조금 낫습니다만 여전히 불편한 것은 마찬가지였습니다.

## Git 서브모듈

사실 이 방법은 언리얼 엔진을 막 다루기 시작했을 무렵에 한 번 접했던 적이 있었습니다만, 그 당시에는 git 사용법조차 헷갈렸었기 때문에 사용하는 것을 나중으로 미뤘었습니다. 이후 이 내용에 대해 까맣게 잊고 있다가 최근에 GitHub 블로그 개설을 위해 chirpy-starter 저장소를 살펴보던 중 우연히 다시 발견하였습니다.

[chirpy-starter / GitHub](https://github.com/cotes2020/chirpy-starter/tree/main/assets)

![image](https://github.com/Eu4ng/eu4ng.github.io/assets/59055049/704713f2-c889-46a6-9061-c86cb3040ba8)

위 이미지를 살펴보시면 `chirpy-starter` 저장소의 `/assets/lib` 폴더가 `chirpy-static-assets` 저장소의 `root` 폴더와 연결되어 있습니다.

여러 git 저장소를 연결할 수 있다는 것을 안 시점에서 이 고민은 바로 해결되었습니다.
프로젝트의 특정 에셋 폴더를 에셋 전용 저장소와 연결시키면 대부분의 문제가 해결되기 때문입니다. 이 방법을 통해 얻을 수 있는 이점을 정리하자면 다음과 같습니다.

1. git 저장소 분리
  - 프로젝트와 에셋 버전 관리를 따로 할 수 있습니다.
  - git 태그 대신 커밋 단위로 연동이 가능합니다.
2. 하나의 프로젝트에서 모든 저장소에 접근 가능
  - 프로젝트 환경 및 설정 동기화 작업이 필요 없습니다.
  - 커밋은 따로 진행해야 하지만 에셋 추가 및 수정 작업은 바로 가능합니다.

추가로 포트폴리오 목적으로 진행하는 프로젝트의 경우 GitHub 저장소를 Public 으로 설정할 필요가 있는데 에셋을 같이 업로드하는 경우 저작권 문제로 인해 새로운 저장소를 생성한 뒤 에셋을 제외한 프로젝트를 업로드하는 방식이 최선이었습니다. 하지만 이 경우에는 커밋이나 이슈 등의 기록을 보여줄 수 없어 아쉬운 점들이 많았는데 Git 서브모듈을 통해 에셋을 다른 저장소로 분리한다면 전혀 문제가 없습니다.

또한, GitHub 을 사용하고 싶지만 LFS 문제로 인해 곤란한 경우에도 에셋만 GitLab 등 사설 Git 저장소를 사용한다면 해결할 수 있습니다.

## 마무리

막상 글로 정리해 보니 그동안 고민한 시간과 노력에 비해 그리 긴 내용도 아니었고, 해결 방법은 간단하여 허무하기도 했지만 삽질하는 과정에서 배운 점들도 많았습니다. 지금 시점에서는 Git 서브모듈을 사용하는 방법보다 더 나은 방법은 거의 없을 것 같습니다만 혹시라도 나중에 더 나은 방법을 발견하게 된다면 다시 한번 관련하여 글을 작성해보도록 하겠습니다.
